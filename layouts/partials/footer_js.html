
<!-- Placed at the end of the document so the pages load faster -->
{{- with .Site.Params.js | default "https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/main.min.js"}}
<script src="{{ . | relURL }}"></script>
{{ end }}
{{ if isset .Site.Params "hugo_js" }}
  {{- with .Site.Params.hugo_js }}
    <script src="{{ . | relURL }}"></script>
  {{ end }}
{{ else }}
    <script src="{{ "/js/solstice.hugo.js" | relURL }}"></script>
{{ end }}

<!-- Read in mustache templates registered in page scratch -->
{{ range $key, $value := (.Page.Scratch.Get "mustache-templates") }}
<script id="{{ $key }}" type="text/html">
{{ readFile $value | safeHTML}}
</script>
{{ end }}

<!-- Initialize any newsroom components on the page -->
<script>
(function($, document) {
  {{ range (.Page.Scratch.Get "events-container-ids") }}
    $("#{{ . }}").eclipseFdnApi({
      type: "filteredEvents"
    });
  {{ end }}
  {{ range (.Page.Scratch.Get "news-container-ids") }}
    $("#{{ . }}").eclipseFdnApi({
      type: "newsItems"
    });
  {{ end }}
  {{ if ne .Page.Params.show_featured_story false }}
    $("{{ .Site.Params.featured_footer_selector | default "#featured-story" }}").eclipseFdnApi({
      type: "featuredStory"
    });
  {{ end }}
  {{ if ne .Page.Params.show_featured_footer false }}
    $("{{ .Site.Params.featured_footer_selector | default "#featured-footer" }}").eclipseFdnApi({
      type: "featuredFooter"
    });
  {{ end }}
})(jQuery, document);
</script>